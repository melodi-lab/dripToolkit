<!DOCTYPE html>
<!-- saved from url=(0051)http://cruxtoolkit.sourceforge.net/tide-search.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>dripSearch</title>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-72240246-3', 'auto');
  ga('send', 'pageview');

</script>

<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
</script><style type="text/css"></style>
<script type="text/javascript">
  MathJax.Hub.Config({jax: ["input/TeX","output/HTML-CSS"], displayAlign: "left"});
</script>
<style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Hover_Arrow {position: absolute; width: 15px; height: 11px; cursor: pointer}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; color: #666666}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuRadioCheck.RTL {right: 1em; left: auto}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_Menu_Close {position: absolute; width: 31px; height: 31px; top: -15px; left: -15px}
</style><style type="text/css">.MathJax_Preview .MJXc-math {color: inherit!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MJXc-script {font-size: .8em}
.MJXc-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXc-bold {font-weight: bold}
.MJXc-italic {font-style: italic}
.MJXc-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXc-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXc-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXc-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXc-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXc-largeop {font-size: 150%}
.MJXc-largeop.MJXc-int {vertical-align: -.2em}
.MJXc-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXc-display {display: block; text-align: center; margin: 1em 0}
.MJXc-math span {display: inline-block}
.MJXc-box {display: block!important; text-align: center}
.MJXc-box:after {content: " "}
.MJXc-rule {display: block!important; margin-top: .1em}
.MJXc-char {display: block!important}
.MJXc-mo {margin: 0 .15em}
.MJXc-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXc-denom {display: inline-table!important; width: 100%}
.MJXc-denom > * {display: table-row!important}
.MJXc-surd {vertical-align: top}
.MJXc-surd > * {display: block!important}
.MJXc-script-box > *  {display: table!important; height: 50%}
.MJXc-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXc-script-box > *:last-child > * {vertical-align: bottom}
.MJXc-script-box > * > * > * {display: block!important}
.MJXc-mphantom {visibility: hidden}
.MJXc-munderover {display: inline-table!important}
.MJXc-over {display: inline-block!important; text-align: center}
.MJXc-over > * {display: block!important}
.MJXc-munderover > * {display: table-row!important}
.MJXc-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXc-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXc-mtr {display: table-row!important}
.MJXc-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXc-mtr > .MJXc-mtd:first-child {padding-left: 0}
.MJXc-mtr:first-child > .MJXc-mtd {padding-top: 0}
.MJXc-mlabeledtr {display: table-row!important}
.MJXc-mlabeledtr > .MJXc-mtd:first-child {padding-left: 0}
.MJXc-mlabeledtr:first-child > .MJXc-mtd {padding-top: 0}
.MJXc-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXc-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXc-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXc-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXc-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXc-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXc-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXc-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXc-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXc-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXc-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_CHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style></head>
<body><div id="MathJax_Message" style="display: none;"></div>
<h1>dripSearch</h1>
<h2>Usage:</h2>
<p><code>./dripSearch.py [options] --spectra 
&lt;spectra file&gt; --digest-dir &lt;protein database&gt;</code></p>

<h2>Description:</h2>
<p>DripSearch utilizes a DBN for Rapid Identification of Peptides
  (DRIP) to identify peptides from tandem mass spectra. DRIP is
  primarily used for high peptide identification accuracy and improved
  derived features regarding PSMs (the latter is utilized in
  <code>dripExtract</code>). Model parameters may also be learned via
  expectation-maximization (implemented in <code>dripTrain</code>) and
  utilized during search for improved accuracy.
  <!-- In DRIP, two -->
  <!-- types of phenomena occuring in tandem mass spectra are explicitly -->
  <!-- modeled: spurious observed peaks, called <em>insertions</em>, and -->
  <!-- missing fragment ions, called <em>deletions</em>. The most probable -->
  <!-- sequence of insertions  -->
  If you use
  DRIP in your research, please
  cite:</p><blockquote>John T. Halloran, Jeff
  A. Bilmes, and William S.
  Noble. <a href="http://auai.org/uai2014/proceedings/individuals/260.pdf">"Learning
  Peptide-Spectrum Alignment Models for Tandem Mass
  Spectrometry"</a>. <em>Thirtieth Conference on Uncertainty in
  Artificial Intelligence (UAI 2014)</em>. AUAI, Quebic City, Quebec
  Canada, July 2014.</blockquote>
<h2>Input:</h2>
<ul>
  <li>
    <code>--spectra &lt;spectra file&gt;</code> &ndash; The name of the file from
  which to parse the fragmentation spectra, in ms2 file format.</li>
  <li><code>--digest-dir &lt;dripDigest output directory&gt;</code> &ndash; Output
  directory of dripDigest (note, the protein database must be digested
  with dripDigest prior to running dripSearch). Default
    = <code>dripDigest-output</code>
  </li>
</ul>
<h2>Output:</h2>
<p>The following directories will be created:
</p><ul>
  <li>
    <code>log</code> &ndash; directory containing DRIP results.  If used in cluster mode
    (<code>--cluster-mode True </code>), cluster search results are
    written to this directory.  If used in standalone mode
    (<code>--cluster-mode False </code>), GMTK output files are
    written to this directory.
  </li>
  <li>
    <code>encode</code> &ndash;
    directory containing GMTK input files.
  </li>
  <li>
    <code>drip_collection</code> &ndash;
    directory containing DRIP parameter files for GMTK.
  </li>
</ul>
<h2>Options:</h2>
<ul style="list-style-type: none;">
<li>
<h3>Search parameters</h3>
<ul>
  <li><code>--precursor-window &lt;float&gt;</code> &ndash; Tolerance used
  for matching peptides to spectra. Peptides must be within +/-
  'precursor-window' of the spectrum value. The precursor window units
  depend upon precursor-window-type. Default = <code>3</code>.</li>
  <li><code>--precursor-window-type &lt;Da|ppm&gt;</code> &ndash;
  Specify the units for the window that is used to select peptides
  around the precursor mass location, either in Daltons
  (<code>Da</code>) or part-per-million (<code>ppm</code>). Default
  = <code>Da</code>.</li>
  <!-- <li><code>--scan-id-list &lt;string&gt;</code> – A file containing a -->
  <!-- list of scan IDs to search. Default -->
  <!-- = <code>&lt;empty&gt;</code>.</li> -->
  <li><code>--charges &lt;comma-separated-integers|all&gt;</code> &ndash; precursor
  charges to search. To specify individual charges, list as
  comma-delimited, e.g., “1,2,3” to search all charge 1, 2, or 3
  spectra. Default = <code>All</code>.</li>
  <li>
    <code>--high-res-ms2 &lt;T|F&gt;</code> &ndash;
    boolean, whether the search is over high-res ms2 (high-high)
    spectra. When this parameter is true, DRIP uses the real valued
    masses of candidate peptides as its Gaussian means; for low-res
    ms2 (low-low or high-low), the observed m/z measurements are much
    less accurate so these Gaussian means are learned using training
    data. Default = <code>False</code>.
  </li>
  <li>
    <code>--high-res-gauss-dist &lt;float&gt;</code> &ndash;
    m/z distance for 99.9% of m/z Gaussian mass to lie within.  Only
    available for high-res MS2 searches. Default=<code>0.05</code>.
  </li>
  <li>
    <code>--precursor-filter &lt;T|F&gt;</code> &ndash;
    boolean, when true, filter all peaks 1.5Da from the observed
    precursor mass. Default=<code>False</code>.
  </li>
  <li>
    <code>--decoys &lt;T|F&gt;</code> &ndash;
    whether to create (shuffle target peptides) and search decoy
    peptides. Default = <code>T</code>.
  </li>
  <li>
    <code>--num-threads &lt;integer&gt;</code> &ndash; the number of threads to run on a multithreaded CPU. If supplied value is greater than number of supported threads, defaults to the maximum number of supported threads. Multithreading is not suppored for cluster use as this is typically handled by the cluster job manager. Default = <code>1</code>.
  </li>
  <li>
    <code>--top-match &lt;integer&gt;</code> &ndash; The number of psms per spectrum written to the output files. Default = <code>1</code>.
  </li>
  <li>
    <code>--beam &lt;integer&gt;</code> &ndash; K-beam width to use to speed
    up inference. Default value of 0 means exact inference. Warning -
    identifications may be significantly poor if the beam width is too
    small, i.e., beam < 100. Default = <code>0</code>.
  </li>
</ul>
<h3>Cluster usage parameters</h3>
<ul>
  <!-- <li> -->
  <!--   <code>--randomize-ms2-spectra &lt;T|F&gt;</code> – whether to -->
  <!--   randomize order of spectra when splitting ms2 file. -->
  <!--   Default = <code>T</code>. -->
  <!-- </li> -->
  <li>
    <code>--random-wait &lt;integer&gt;</code> &ndash; randomly wait up to
    specified number of seconds before writing results back to NFS
    (for cluster use). Default = <code>10</code>.
  </li>
  <li>
    <code>--num-jobs &lt;integer&gt;</code> &ndash; the number of jobs to
    run in parallel (for cluster use). Default = <code>1</code>.
  </li>
  <li>
    <code>--cluster-mode &lt;T|F&gt;</code> &ndash; evaluate dripSearch
    prepared data as jobs on a cluster.  Only set this to true once
    dripSearch has been run to prepare data for cluster use.  Default
    = <code>False</code>.
  </li>
  <li>
    <code>--write-cluster-scripts &lt;T|F&gt;</code> &ndash; write scripts
    to be submitted to cluster queue.  Only used when num-jobs > 1.
    Job outputs will be written to log subdirectory in current
    directory. Default = <code>True</code>.
  </li>
  <li>
    <code>--cluster-dir &lt;string&gt;</code> &ndash; absolute path of
    directory to run cluster jobs. Default = <code>/tmp</code>.
  </li>
  <li>
    <code>--merge-cluster-results &lt;T|F&gt;</code> &ndash; merge
    dripSearch cluster results collected in directory <code>log</code>.
    Default = <code>False</code>.
  </li>
</ul>
</li>
<li>
<h3>Input and output</h3>
<ul>
  <li>
    <code>--output &lt;string&gt;</code> &ndash; output file to write
    both target and decoy results. Default = <code>none</code>.
  </li>
</ul>
</li>
</ul>

<h2>Example usage:</h2>
<ul style="list-style-type: none;">
  <p>The following examples are available in <code>test.sh</code>.
    Run <code>dripDigest</code> and <code>dripTrain</code> first, as necessary.</p>
  <h3>Low-resolution MS1 and MS2 search</h3>
  <ul>
    <p>python -OO dripSearch.py  \<br>
      --digest-dir 'dripDigest-output' \<br>
      --precursor-window 3.0 \<br>
      --charges 2 \<br>
      --spectra data/test.ms2 \<br>
      --output dripSearch-test-output \<br>
      --num-threads 8 \<br>
      --top-match 1 \<br>
      --learned-means dripLearned.means \<br>
      --learned-covars dripLearned.covars
    </p>
  </ul>
  <h3>Low-resolution MS1 and MS2 search, faster search with beam pruning</h3>
  <ul>
   <p>python -OO dripSearch.py  \<br>
      --digest-dir 'dripDigest-output' \<br>
      --precursor-window 3.0 \<br>
      --charges 2 \<br>
      --spectra data/test.ms2 \<br>
      --output dripSearch-test-output \<br>
      --num-threads 8 \<br>
      --top-match 1 \<br>
      --learned-means dripLearned.means \<br>
      --learned-covars dripLearned.covars \<br>
     --beam 75
    </p>
  </ul>
  <h3>High-resolution MS1 and MS2 search</h3>
  <ul>
    <p>python -OO dripSearch.py \<br>
	--digest-dir 'dripDigest-output' \<br>
	--num-threads 8 \<br>
	--high-res-ms2 true \<br>
	--precursor-window 50 \<br>
	--precursor-window-type 'ppm' \<br>
	--precursor-filter 'True' \<br>
	--spectra data/malariaTest.ms2 \<br>
	--output dripSearch-malariaTestVarmods-output<br>
    </p>
  </ul>
  <h3>Split data for cluster usage</h3>
  <ul>
    <p>python -OO dripSearch.py \<br>
    	    --digest-dir 'dripDigest-output' \<br>
    	    --precursor-window 3.0 \<br>
    	    --learned-means dripLearned.means \<br>
    	    --learned-covars dripLearned.covars \<br>
	    --num-threads 8 \<br>
	    --num-cluster-jobs 4 \<br>
    	    --top-match 1 \<br>
    	    --spectra data/test.ms2 \<br>
    	    --output dripSearch-clusterTest-output
      </p>
  </ul>
  <h3>Merge outputs of cluster jobs</h3>
  <ul>
    <p>python -OO dripSearch.py \<br>
      --merge-cluster-results True \<br>
    	    --logDir log \<br>
    	    --output dripSearch-clusterTest-output
    </p>
  </ul>
</ul>
<hr>
<a href="http://melodi.ee.washington.edu/~halloj3/dripToolKit">DRIP
  Toolkit home</a>

</body></html>
